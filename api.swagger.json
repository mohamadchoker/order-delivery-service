{
  "swagger": "2.0",
  "info": {
    "title": "proto/delivery.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "DeliveryService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/deliveries": {
      "get": {
        "summary": "ListDeliveryAssignments lists delivery assignments with pagination",
        "operationId": "DeliveryService_ListDeliveryAssignments",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/deliveryListDeliveryAssignmentsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "status",
            "description": " - UNSPECIFIED: Unspecified (default)\n - PENDING: Pending - awaiting driver assignment\n - ASSIGNED: Assigned - driver assigned\n - PICKED_UP: Picked up - package collected\n - IN_TRANSIT: In transit - on the way\n - DELIVERED: Delivered - successfully delivered\n - FAILED: Failed - delivery failed\n - CANCELLED: Cancelled - delivery cancelled",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "UNSPECIFIED",
              "PENDING",
              "ASSIGNED",
              "PICKED_UP",
              "IN_TRANSIT",
              "DELIVERED",
              "FAILED",
              "CANCELLED"
            ],
            "default": "UNSPECIFIED"
          },
          {
            "name": "driverId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      },
      "post": {
        "summary": "CreateDeliveryAssignment creates a new delivery assignment",
        "operationId": "DeliveryService_CreateDeliveryAssignment",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/deliveryDeliveryAssignment"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/deliveryCreateDeliveryAssignmentRequest"
            }
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      }
    },
    "/v1/deliveries/metrics": {
      "get": {
        "summary": "GetDeliveryMetrics retrieves delivery metrics",
        "operationId": "DeliveryService_GetDeliveryMetrics",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/deliveryDeliveryMetrics"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "startTime",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "date-time"
          },
          {
            "name": "endTime",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "date-time"
          },
          {
            "name": "driverId",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      }
    },
    "/v1/deliveries/{id}": {
      "get": {
        "summary": "GetDeliveryAssignment retrieves a delivery assignment by ID",
        "operationId": "DeliveryService_GetDeliveryAssignment",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/deliveryDeliveryAssignment"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      },
      "delete": {
        "operationId": "DeliveryService_DeleteDeliveryAssignment",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      }
    },
    "/v1/deliveries/{id}/assign-driver": {
      "post": {
        "summary": "AssignDriver assigns a driver to a delivery",
        "operationId": "DeliveryService_AssignDriver",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/deliveryDeliveryAssignment"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryServiceAssignDriverBody"
            }
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      }
    },
    "/v1/deliveries/{id}/status": {
      "patch": {
        "summary": "UpdateDeliveryStatus updates the status of a delivery",
        "operationId": "DeliveryService_UpdateDeliveryStatus",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/deliveryDeliveryAssignment"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeliveryServiceUpdateDeliveryStatusBody"
            }
          }
        ],
        "tags": [
          "DeliveryService"
        ]
      }
    }
  },
  "definitions": {
    "DeliveryServiceAssignDriverBody": {
      "type": "object",
      "properties": {
        "driverId": {
          "type": "string"
        }
      },
      "title": "AssignDriverRequest assigns a driver to delivery"
    },
    "DeliveryServiceUpdateDeliveryStatusBody": {
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/deliveryDeliveryStatus"
        },
        "notes": {
          "type": "string"
        }
      },
      "title": "UpdateDeliveryStatusRequest updates delivery status"
    },
    "deliveryAddress": {
      "type": "object",
      "properties": {
        "street": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "state": {
          "type": "string"
        },
        "postalCode": {
          "type": "string"
        },
        "country": {
          "type": "string"
        },
        "latitude": {
          "type": "number",
          "format": "double"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        }
      },
      "title": "Address represents a physical address"
    },
    "deliveryCreateDeliveryAssignmentRequest": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string"
        },
        "pickupAddress": {
          "$ref": "#/definitions/deliveryAddress"
        },
        "deliveryAddress": {
          "$ref": "#/definitions/deliveryAddress"
        },
        "scheduledPickupTime": {
          "type": "string",
          "format": "date-time"
        },
        "estimatedDeliveryTime": {
          "type": "string",
          "format": "date-time"
        },
        "notes": {
          "type": "string"
        }
      },
      "title": "CreateDeliveryAssignmentRequest creates a new delivery assignment"
    },
    "deliveryDeliveryAssignment": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "orderId": {
          "type": "string"
        },
        "driverId": {
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/deliveryDeliveryStatus"
        },
        "pickupAddress": {
          "$ref": "#/definitions/deliveryAddress"
        },
        "deliveryAddress": {
          "$ref": "#/definitions/deliveryAddress"
        },
        "scheduledPickupTime": {
          "type": "string",
          "format": "date-time"
        },
        "estimatedDeliveryTime": {
          "type": "string",
          "format": "date-time"
        },
        "actualPickupTime": {
          "type": "string",
          "format": "date-time"
        },
        "actualDeliveryTime": {
          "type": "string",
          "format": "date-time"
        },
        "notes": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "DeliveryAssignment represents a delivery assignment"
    },
    "deliveryDeliveryMetrics": {
      "type": "object",
      "properties": {
        "totalDeliveries": {
          "type": "integer",
          "format": "int32"
        },
        "completedDeliveries": {
          "type": "integer",
          "format": "int32"
        },
        "failedDeliveries": {
          "type": "integer",
          "format": "int32"
        },
        "cancelledDeliveries": {
          "type": "integer",
          "format": "int32"
        },
        "averageDeliveryTimeMinutes": {
          "type": "number",
          "format": "double"
        },
        "onTimeDeliveryRate": {
          "type": "number",
          "format": "double"
        }
      },
      "title": "DeliveryMetrics contains aggregated delivery statistics"
    },
    "deliveryDeliveryStatus": {
      "type": "string",
      "enum": [
        "UNSPECIFIED",
        "PENDING",
        "ASSIGNED",
        "PICKED_UP",
        "IN_TRANSIT",
        "DELIVERED",
        "FAILED",
        "CANCELLED"
      ],
      "default": "UNSPECIFIED",
      "description": "- UNSPECIFIED: Unspecified (default)\n - PENDING: Pending - awaiting driver assignment\n - ASSIGNED: Assigned - driver assigned\n - PICKED_UP: Picked up - package collected\n - IN_TRANSIT: In transit - on the way\n - DELIVERED: Delivered - successfully delivered\n - FAILED: Failed - delivery failed\n - CANCELLED: Cancelled - delivery cancelled",
      "title": "DeliveryStatus represents the current status of a delivery"
    },
    "deliveryListDeliveryAssignmentsResponse": {
      "type": "object",
      "properties": {
        "assignments": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/deliveryDeliveryAssignment"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "pageSize": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "ListDeliveryAssignmentsResponse returns paginated delivery assignments"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
